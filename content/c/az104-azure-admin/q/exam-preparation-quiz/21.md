---
title: "Deploy Resources To Resource Group With CanNotDelete Lock"
type: "question"
layout: "single"
answers:
  - id: "answer1"
    title: "Yes"
    correct: true
    explain: "The CanNotDelete lock level allows you to deploy and modify resources within the resource group. It only prevents the deletion of the resource group and its resources, but does not restrict creation or modification operations."
  - id: "answer2"
    title: "No"
    correct: false
    explain: "The CanNotDelete lock does not prevent resource deployment or modification. It only prevents deletion operations, so you can still deploy virtual machines and other resources to RG1."
link: "https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/lock-resources"
more: "Learn More About Azure Resource Locks"
learn: "Azure Resource Lock Types"
---

MDFT Pro, a well-known training agency, is implementing infrastructure as code practices to standardize their Azure environment deployments across multiple training centers. Mark, the DevOps Engineer at MDFT Pro, has created an ARM template named Deploy.json to automatically provision resource groups with appropriate security controls for their educational infrastructure. The template creates three resource groups (RG0, RG1, RG2) in the East US region and applies different lock levels to control resource management. RG1 receives a "CanNotDelete" lock to protect critical training resources from accidental deletion while still allowing updates, and RG2 gets a "ReadOnly" lock to prevent any modifications to production systems.

```json
{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {},
  "variables": {},
  "resources": [
    {
      "type": "Microsoft.Resources/resourceGroups",
      "apiVersion": "2018-05-01",
      "location": "eastus",
      "name": "[concat('RG', copyIndex())]",
      "copy": {
        "name": "copy",
        "count": 3
      }
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2021-04-01",
      "name": "lockDeployment",
      "resourceGroup": "RG1",
      "dependsOn": ["[resourceId('Microsoft.Resources/resourceGroups/', 'RG1')]"],
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "parameters": {},
          "variables": {},
          "resources": [
            {
              "type": "Microsoft.Authorization/locks",
              "apiVersion": "2016-09-01",
              "name": "rgLock",
              "properties": {
                "level": "CanNotDelete"
              }
            }
          ]
        }
      }
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2021-04-01",
      "name": "lockDeployment",
      "resourceGroup": "RG2",
      "dependsOn": ["[resourceId('Microsoft.Resources/resourceGroups/', 'RG2')]"],
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "parameters": {},
          "variables": {},
          "resources": [
            {
              "type": "Microsoft.Authorization/locks",
              "apiVersion": "2016-09-01",
              "name": "rgLock",
              "properties": {
                "level": "ReadOnly"
              }
            }
          ]
        }
      }
    }
  ],
  "outputs": {}
}
```

After deploying this template using `New-AzDeployment -Location westus -TemplateFile "deploy.json"`, can you deploy a virtual machine to RG1?
