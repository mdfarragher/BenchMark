---
title: "Configure DNS Resolution Across Azure Virtual Networks Using Peering"
type: "question"
layout: "single"
answers:
  - id: "answer1"
    title: "Add service endpoints on VNET2 and VNET3"
    correct: false
    explain: "Service endpoints provide secure connectivity to Azure services but do not enable DNS resolution between virtual networks or allow access to custom DNS services on other VNets."
  - id: "answer2"
    title: "Add service endpoints on VNET1"
    correct: false
    explain: "Service endpoints on VNET1 would not help other virtual networks access the DNS service on VM1. Service endpoints are for connecting to Azure services, not custom DNS servers."
  - id: "answer3"
    title: "Configure a conditional forwarder on VM1"
    correct: false
    explain: "A conditional forwarder would help VM1 resolve names from other DNS zones, but it doesn't solve the network connectivity issue that prevents VMs in VNET2 and VNET3 from reaching the DNS service on VM1."
  - id: "answer4"
    title: "Configure peering between VNET1, VNET2, and VNET3"
    correct: true
    explain: "Correct. Virtual network peering establishes network connectivity between VNets, allowing VMs in VNET2 and VNET3 to communicate with the DNS service on VM1 in VNET1. Once peering is configured, the DNS settings will work properly."
link: "https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview"
more: "Learn More About Azure Virtual Network Peering"
learn: "Azure VNet Peering"
---

MDFT Pro, a well-known training agency, operates a comprehensive Azure networking training environment across multiple virtual networks for their Azure networking certification program. Mark, the Network Infrastructure Designer, has deployed virtual machines across three separate virtual networks to demonstrate network segmentation and DNS resolution concepts.

The current network topology includes:

| Virtual Machine | IP Address | Virtual Network | Subnet |
|-----------------|------------|-----------------|---------|
| VM1 | 10.1.0.4 | VNET1 | Subnet1 |
| VM2 | 10.1.10.4 | VNET1 | Subnet2 |
| VM3 | 172.16.0.4 | VNET2 | SubnetA |
| VM4 | 10.2.0.8 | VNET3 | SubnetB |

Claire, the DNS Infrastructure Coordinator, has installed a custom DNS service on VM1 and configured each virtual network to use VM1 as the primary DNS server. However, VM3 and VM4 cannot resolve DNS names using the service on VM1, while VM2 works correctly.

What should Mark configure to ensure that all virtual machines can resolve DNS names using the DNS service on VM1?