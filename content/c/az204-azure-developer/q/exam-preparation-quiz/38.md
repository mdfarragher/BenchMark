---
title: "Identify Cosmos DB Cross-Partition Query"
type: "question"
layout: "single"
answers:
    - id: "answer1"
      title: "Yes, the query is an in-partition query"
      correct: false
      explain: "The query filters on StudentId with a range condition (>) rather than an equality condition (=). Range queries that don't specify an exact partition key value must scan multiple partitions to find all matching documents. Only queries with WHERE clauses using '=' on the exact partition key field can be in-partition queries."
    - id: "answer2"
      title: "No, the query is a cross-partition query"
      correct: true
      explain: "Since the query uses a range comparison (StudentId > '12345') instead of an equality check on the partition key, Cosmos DB must execute the query across all partitions. Cross-partition queries consume more RUs and have higher latency because they need to fan out across multiple physical partitions to find all matching documents."
link: "https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/how-to-query-container"
more: "Learn more about Cosmos DB Queries"
learn: "Query Cosmos DB Containers"
---

You work as a Database Developer for MDFT Pro, a well-known training agency that delivers certification courses to students worldwide. Claire, the Application Performance Lead, has asked you to analyze query performance for the Student Enrollment Management application that uses Azure Cosmos DB as its data store. You created a container to store student enrollment records using the PowerShell script below, which partitions data by StudentId. During performance testing, you notice varying query costs and want to understand whether specific queries are optimized as in-partition queries (which access only one partition) or if they're cross-partition queries (which scan multiple partitions and consume more RUs).

```powershell
$resourceGroupName = "StudentResourceGroup"
$accountName = "MDFTProCosmosAccount"
$databaseName = "EnrollmentDatabase"
$containerName = "StudentEnrollments"
$partitionKeyPath = "/StudentId"
$autoscaleMaxThroughput = 5000
New-AzCosmosDBSqlContainer
	-ResourceGroupName $resourceGroupName
	-AccountName $accountName
	-DatabaseName $databaseName
	-Name $containerName
	-PartitionKeyKind Hash
	-PartitionKeyPath $partitionKeyPath
	-AutoscaleMaxThroughput $autoscaleMaxThroughput
```

You create the following query that targets the container:

```sql
SELECT * FROM c WHERE c.StudentId > '12345'
```

Is the following statement about the query true?

**Statement:** The query is an in-partition query.
