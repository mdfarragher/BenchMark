---
title: "Configure Virtual Network To Support Database Migration"
type: "question"
layout: "single"
answers:
    - id: "answer1"
      title: "Configure service endpoints"
      correct: true
      explain: "Service endpoints enable Azure Database Migration Service to connect to the SQL managed instance over the virtual network, which is required for the migration."
    - id: "answer2"
      title: "Configure virtual network peering"
      correct: false
      explain: "Virtual network peering is used to connect two virtual networks, but this is not the primary requirement for Database Migration Service to access the managed instance."
    - id: "answer3"
      title: "Deploy an Azure firewall"
      correct: false
      explain: "An Azure firewall provides network security but is not required specifically for Database Migration Service to connect to the SQL managed instance."
    - id: "answer4"
      title: "Configure network security groups (NSGs)"
      correct: false
      explain: "While NSGs may be needed for security, configuring service endpoints is the primary requirement for enabling Database Migration Service connectivity."
link: "https://learn.microsoft.com/en-us/azure/dms/tutorial-sql-server-managed-instance-online"
more: "Learn more about Migrating SQL Server To Azure SQL Managed Instance Online"
learn: "Migrating To SQL Managed Instance"
---
You work for MDFT Pro, a well-known training agency with an on-premises Microsoft SQL Server 2019 server that hosts a critical database named CourseLibrary. Mark, the Cloud Migration Specialist, has an Azure subscription that contains an Azure SQL managed instance named TrainingDB and a virtual network named TrainingVNET. The TrainingDB managed instance resides on TrainingVNET, and the on-premises network connects to TrainingVNET through an ExpressRoute connection to ensure secure, high-bandwidth connectivity. Mark plans to migrate the CourseLibrary database to TrainingDB using the Azure Database Migration Service to minimize downtime during the migration. Before starting the migration, he has asked you to configure TrainingVNET to properly support the Database Migration Service connectivity requirements.

[comment]: <> (AI-NOTE: According to Microsoft Learn DMS documentation, in addition to service endpoints, you must also configure Network Security Group (NSG) rules to not block port 443 for ServiceTags of ServiceBus, Storage, and AzureMonitor. The current answer is incomplete - it should be a multiple-choice question requiring both service endpoints AND NSG configuration, or the explanation should mention that NSG configuration is also necessary.)

What should you do?
