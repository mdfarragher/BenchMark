---
title: "Troubleshoot USERNAME() Function in Dynamic RLS"
type: "question"
layout: "single"
answers:
    - id: "answer1"
      title: "Yes"
      explain: "Creating a role does not solve the problem. While roles are necessary for RLS implementation, USERNAME() can return inconsistent results in certain authentication scenarios. The issue is with the function choice, not the role configuration."
    - id: "answer2"
      title: "No"
      correct: true
      explain: "Simply creating a role does not solve the problem. USERNAME() can return blank or inconsistent results in the Power BI service, especially with synced identities. The recommended solution is to use USERPRINCIPALNAME() instead, which reliably returns the user's UPN format (user@domain.com) in the Power BI service and works more consistently with Microsoft Entra ID authentication."
link: "https://learn.microsoft.com/en-us/fabric/security/service-admin-row-level-security"
more: "Learn more about Row-Level Security in Fabric"
learn: "Row Level Security"
---
You work for MDFT Pro, a well-known training organization. The academy's network contains an on-premises Active Directory Domain Services (AD DS) domain that syncs with a Microsoft Entra tenant using Microsoft Entra Connect.

MDFT Pro has a Fabric tenant containing a semantic model for student data. You enable dynamic row-level security (RLS) for the model and deploy it to the Fabric service. But when querying a measure that includes the `USERNAME()` function, it returns a blank result.

To ensure that the measure returns the user principal name (UPN) of a user, you create a role in the model.

Does this solve the problem?
