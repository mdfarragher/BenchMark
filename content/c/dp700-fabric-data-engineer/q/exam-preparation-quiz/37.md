---
title: "Troubleshoot Failed Pipeline with Dynamic SQL"
type: "question"
layout: "single"
answers:
    - id: "answer1"
      title: "From Monitoring hub, select the latest failed run of Pipeline1, and then view the output JSON"
      correct: false
      explain: "The output JSON shows the results produced by an activity after it runs, including success status, row counts, and performance metrics. For identifying which SQL query was executed, you need to see the input parameters, not the output results."
    - id: "answer2"
      title: "From Monitoring hub, select the latest failed run of Pipeline1, and then view the input JSON"
      correct: true
      explain: "The input JSON contains all the parameters and configurations that were active when the activity ran, including the dynamically generated SQL query text. This allows you to see exactly which SQL statement was executed at the time of failure, making it essential for debugging dynamic SQL issues."
    - id: "answer3"
      title: "From Real-time hub, select Fabric events, and then review the details of Microsoft.Fabric.ItemReadFailed"
      correct: false
      explain: "ItemReadFailed events indicate failures when reading Fabric items (like notebooks or datasets), not pipeline activity failures. This event type wouldn't contain information about SQL queries executed within pipeline activities."
    - id: "answer4"
      title: "From Real-time hub, select Fabric events, and then review the details of Microsoft.Fabric.ItemUpdateFailed"
      correct: false
      explain: "ItemUpdateFailed events relate to failures when updating Fabric items, not pipeline activity execution. These events wouldn't show the SQL queries executed by Copy data activities within pipelines."
link: "https://learn.microsoft.com/en-us/fabric/data-factory/monitor-pipeline-runs"
more: "Learn more about monitoring pipeline runs"
learn: "Monitor Pipeline Runs"
---
You work for MDFT Pro, a well-known training agency that manages student enrollment data. Claire, a Data Engineer at MDFT Pro, has created a Fabric warehouse called StudentRecords that loads data using a data pipeline named DailyEnrollmentSync. The pipeline uses a Copy data activity with a dynamic SQL source that generates different SQL queries based on parameters passed at runtime (such as date ranges, department IDs, and course categories). The pipeline is scheduled to run every 15 minutes to keep the warehouse synchronized with the source enrollment system. Recently, Claire discovered that DailyEnrollmentSync keeps failing during certain time windows. To troubleshoot the issue, she needs to identify the exact SQL query that was executed when the pipeline failed, including all the dynamically generated values and parameters. This information will help her determine whether the failure is caused by syntax errors in the query generation logic or invalid parameter values.

What should Claire do to identify which SQL query was executed when the pipeline failed?
