---
title: "Remove Old Unused Files from Eventstream Lakehouse Output"
type: "question"
layout: "single"
answers:
    - id: "answer1"
      title: "VACUUM"
      correct: true
      explain: "VACUUM removes old files that are no longer referenced by a Delta table transaction log and are older than the retention threshold, which defaults to seven days. When eventstreams output to lakehouse tables, they create Delta tables with Parquet files. Running VACUUM cleans up these unreferenced files to optimize storage costs while maintaining the ability to time travel to recent versions. You can run VACUUM through the lakehouse UI (right-click table > Maintenance) or using the Lakehouse API."
    - id: "answer2"
      title: "COMPUTE"
      correct: false
      explain: "COMPUTE is not a valid Delta Lake or Fabric lakehouse table maintenance command. There is no COMPUTE command for managing Delta table files or cleanup operations in Microsoft Fabric."
    - id: "answer3"
      title: "OPTIMIZE"
      correct: false
      explain: "OPTIMIZE performs bin-compaction by consolidating multiple small Parquet files into larger files for better query performance. While OPTIMIZE improves read performance, it doesn't remove old files from storage. After running OPTIMIZE, you would still need to run VACUUM to actually delete the old unreferenced files."
    - id: "answer4"
      title: "CLONE"
      correct: false
      explain: "CLONE creates a copy of a Delta table at a specific version, either as a deep clone (copying all data files) or shallow clone (copying only metadata). CLONE is used for creating table copies for testing or archival purposes, not for removing old unused files from the source table."
link: "https://learn.microsoft.com/en-us/fabric/data-engineering/lakehouse-table-maintenance"
more: "Learn more about Delta table maintenance"
learn: "Delta Table Maintenance"
---
You work for MDFT Pro, a well-known training agency that streams real-time student activity data. Mark, a Data Engineering Lead at MDFT Pro, manages a Fabric workspace that contains an eventstream named StudentActivityStream. StudentActivityStream captures real-time events from the learning management system, including student login events, course page views, video watch progress, quiz submissions, and discussion forum posts. The eventstream outputs these events to a Delta table in a lakehouse where they are stored for historical analysis and reporting. Over time, as the eventstream continuously writes new data and the Delta table undergoes updates and merges, old Parquet files accumulate in the lakehouse storage even though they are no longer referenced by the current version of the table. Mark needs to clean up these unreferenced old files to reduce storage costs and maintain optimal lakehouse performance. He wants to remove files that are older than seven days and are no longer in use by the current table version, while preserving the ability to query recent historical versions for debugging and auditing purposes.

Which command should Mark run to remove files that are older than seven days and are no longer in use?
