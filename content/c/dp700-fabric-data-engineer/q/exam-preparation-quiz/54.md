---
title: "Isolate Queries from Last 60 Minutes with User Details"
type: "question"
layout: "single"
answers:
    - id: "answer1"
      title: "Query activity"
      correct: true
      explain: "Query activity provides a one-stop view of all running and historical T-SQL queries without requiring you to write any T-SQL code. It shows query runs from the past 30 days and includes the username of users who submitted queries, query statements, execution status (running, succeeded, canceled, failed), and timing information. You can access Query activity by selecting the warehouse's More Options (...) menu or from the query editor ribbon. Note that you must be an admin in your workspace to access Query activity."
    - id: "answer2"
      title: "The Microsoft Fabric Capacity Metrics app"
      correct: false
      explain: "The Microsoft Fabric Capacity Metrics app monitors capacity consumption, throttling, and resource utilization across Fabric workloads at the capacity level. It focuses on Capacity Unit (CU) consumption and performance metrics, not individual query details like usernames and query statements. It doesn't provide query-level monitoring with user information."
    - id: "answer3"
      title: "The sys.dm_exec_requests dynamic management view"
      correct: false
      explain: "The sys.dm_exec_requests DMV shows information about currently running requests in real-time, but it doesn't maintain a historical record of queries from the past 60 minutes. It only shows active queries that are currently executing. Additionally, while it can show session information, you would need to join it with sys.dm_exec_sessions to get usernames, making it more complex than Query activity."
    - id: "answer4"
      title: "Views from the queryinsights schema"
      correct: false
      explain: "While the queryinsights schema views (like exec_requests_history) do contain historical query information including usernames and query text, they require writing T-SQL queries to retrieve and filter the data. Query activity provides the same information through a graphical interface without requiring code, making it more efficient for this monitoring task."
link: "https://learn.microsoft.com/en-us/fabric/data-warehouse/query-activity"
more: "Learn more about monitoring queries using Query activity"
learn: "Query Activity"
---
You work for MDFT Pro, a well-known training agency that manages student data analytics. Mark, a Database Administrator at MDFT Pro, is responsible for maintaining a Fabric workspace containing a warehouse named StudentAnalyticsWarehouse. The warehouse supports multiple concurrent users who run various analytics queries throughout the day to generate reports on student enrollment trends, course completion rates, and instructor performance metrics. While monitoring StudentAnalyticsWarehouse, Mark discovers that query performance has degraded significantly during the last 60 minutes, with several users reporting slow response times and timeouts. To troubleshoot the issue, Mark needs to isolate all the queries that were run during this problematic time window. The results must include the username of the users who submitted the queries and the actual query statements that were executed, so he can identify resource-intensive queries and communicate with users about query optimization or schedule adjustments.

What should Mark use to isolate the queries from the last 60 minutes with username and query statement information?
